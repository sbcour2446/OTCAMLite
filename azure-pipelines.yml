# azure-pipelines.yml
# Minimal “fail fast + show why it’s pending” pipeline

trigger:
- main

jobs:
- job: Build
  displayName: "Build (diagnose agent scheduling)"
  timeoutInMinutes: 10

  pool:
    name: ATEC-Data-Mesh-AgentPool-AKS
    demands:
      - DEVOPS_AGENT_ENV -equals cloud.army.D

  steps:
  - script: |
      echo "Agent is running this job."
      echo "AGENT_NAME=$(AGENT_NAME)"
      echo "AGENT_MACHINENAME=$(AGENT_MACHINENAME)"
      echo "BUILD_BUILDID=$(BUILD_BUILDID)"
    displayName: "Confirm agent assignment"
