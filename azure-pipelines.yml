# azure-pipelines.yml
trigger:
- main

jobs:
- job: Build
  displayName: "Build (diagnose agent + Java)"
  timeoutInMinutes: 10

  pool:
    name: ATEC-Data-Mesh-AgentPool-AKS
    demands:
      - DEVOPS_AGENT_ENV -equals cloud.army.D

  steps:
  - bash: |
      set -e
      echo "Agent is running this job."
      echo "AGENT_NAME=${AGENT_NAME:-<empty>}"
      echo "AGENT_MACHINENAME=${AGENT_MACHINENAME:-<empty>}"
      echo "BUILD_BUILDID=${BUILD_BUILDID:-<empty>}"
      echo ""
      echo "JAVA_HOME=${JAVA_HOME:-<empty>}"
      command -v java || true
      java -version || true
    displayName: "Confirm agent assignment"
